<!doctype html>
<html lang="tr" data-theme="dark">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Morphera Admin Paneli</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ------------------------------
    GLOBAL STYLES
------------------------------ */
:root {
  --bg-dark: #0c0d14;
  --bg-light: #f4f7ff;

  --card-dark: rgba(255,255,255,0.06);
  --card-light: rgba(255,255,255,0.4);

  --text-dark: #fff;
  --text-light: #111;

  --border-dark: rgba(255,255,255,0.12);
  --border-light: rgba(0,0,0,0.08);

  --gradient: linear-gradient(135deg,#6366f1,#8b5cf6,#ec4899);
}

html[data-theme="dark"] {
  --bg: var(--bg-dark);
  --text: var(--text-dark);
  --card: var(--card-dark);
  --border: var(--border-dark);
}

html[data-theme="light"] {
  --bg: var(--bg-light);
  --text: var(--text-light);
  --card: var(--card-light);
  --border: var(--border-light);
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: "Inter", sans-serif;
  margin: 0;
}

/* ------------------------------
    NAVBAR
------------------------------ */
.navbar {
  background: var(--card);
  backdrop-filter: blur(18px);
  border-bottom: 1px solid var(--border);
  padding: 16px 40px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.brand {
  display: flex;
  align-items: center;
  gap: 14px;
  font-weight: 700;
  font-size: 22px;
}

.brand img {
  width: 46px;
}

.theme-toggle {
  cursor: pointer;
  padding: 8px 16px;
  background: var(--gradient);
  color: white;
  border: none;
  border-radius: 10px;
  font-weight: 600;
}

/* ------------------------------
    LAYOUT
------------------------------ */
.wrapper {
  display: grid;
  grid-template-columns: 260px auto;
  gap: 25px;
  padding: 30px;
}

.sidebar {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 25px;
  height: calc(100vh - 120px);
  position: sticky;
  top: 20px;
}

.menu-item {
  padding: 14px;
  margin-bottom: 12px;
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  cursor: pointer;
}
.menu-item:hover {
  background: rgba(255,255,255,0.12);
}

/* ------------------------------
    PANEL CARDS
------------------------------ */
.panel {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 22px;
  padding: 26px;
  display: none;
}
.panel.active {
  display: block;
}

h2 { margin-bottom: 16px; }

input,textarea {
  width: 100%;
  padding: 12px 16px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.1);
  color: var(--text);
  margin-bottom: 14px;
}

.btn-primary {
  background: var(--gradient);
  padding: 12px 24px;
  border-radius: 14px;
  color: white;
  border: none;
  font-weight: 600;
  cursor: pointer;
}

/* POSTS */
.post-item {
  background: rgba(255,255,255,0.05);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 12px;
}

.post-actions button {
  margin-right: 10px;
  border-radius: 8px;
  padding: 6px 12px;
  border: none;
  cursor: pointer;
}

.btn-edit { background:#0ea5e9;color:#fff; }
.btn-delete { background:#dc2626;color:#fff; }

</style>
</head>


<body>

<!-- NAVBAR -->
<div class="navbar">
  <div class="brand">
    <img src="assets/img/logo/morphera.png">
    WeAreMorphera â€“ Admin Paneli
  </div>

  <button class="theme-toggle" id="themeToggle">ðŸŒ— Tema DeÄŸiÅŸtir</button>
</div>


<div class="wrapper">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="menu-item" onclick="showPanel('profilePanel')">Profil AyarlarÄ±</div>
    <div class="menu-item" onclick="showPanel('newPostPanel')">Yeni GÃ¶nderi</div>
    <div class="menu-item" onclick="showPanel('postsPanel')">GÃ¶nderiler</div>
  </aside>


  <!-- MAIN PANELS -->
  <div>

    <!-- PROFILE PANEL -->
    <div class="panel active" id="profilePanel">
      <h2>Profil AyarlarÄ±</h2>

      <label>Profil FotoÄŸrafÄ± URL</label>
      <input id="profilePhoto">

      <label>Kapak FotoÄŸrafÄ± URL</label>
      <input id="coverPhoto">

      <button class="btn-primary" id="saveProfile">Kaydet</button>
    </div>

    <!-- NEW POST -->
    <div class="panel" id="newPostPanel">
      <h2>Yeni GÃ¶nderi</h2>

      <label>Metin</label>
      <textarea id="postText"></textarea>

      <label>GÃ¶rsel URL (opsiyonel)</label>
      <input id="postImage">

      <button class="btn-primary" id="addPost">GÃ¶nderiyi PaylaÅŸ</button>
    </div>

    <!-- POSTS LIST -->
    <div class="panel" id="postsPanel">
      <h2>GÃ¶nderiler</h2>
      <div id="postsList"></div>
    </div>

  </div>
</div>



<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import {
  getFirestore,
  collection,
  addDoc,
  getDocs,
  updateDoc,
  doc,
  deleteDoc,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCoLU3FES5QdNoD1WOHz9M7Z01U63hkn4U",
  authDomain: "morpheranotes.firebaseapp.com",
  projectId: "morpheranotes",
  storageBucket: "morpheranotes.firebasestorage.app",
  messagingSenderId: "756772520204",
  appId: "1:756772520204:web:b686f9f69f860098a10929"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const notesRef = collection(db, "morpheraNotes");
const profileRef = collection(db, "morpheraProfile");

/* ------------------------------
      PANEL SWITCH
------------------------------ */
window.showPanel = function (id) {
  document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
};

/* ------------------------------
      TEMA DEÄžÄ°ÅžTÄ°R
------------------------------ */
document.getElementById("themeToggle").onclick = () => {
  const html = document.documentElement;
  html.dataset.theme = html.dataset.theme === "dark" ? "light" : "dark";
};

/* ------------------------------
      PROFÄ°L KAYDET
------------------------------ */
document.getElementById("saveProfile").onclick = async () => {
  await addDoc(profileRef, {
    profilePhoto: document.getElementById("profilePhoto").value,
    coverPhoto: document.getElementById("coverPhoto").value
  });
  alert("Profil gÃ¼ncellendi!");
};

/* ------------------------------
      GÃ–NDERÄ° EKLE
------------------------------ */
document.getElementById("addPost").onclick = async () => {
  const text = document.getElementById("postText").value;
  const img = document.getElementById("postImage").value;

  await addDoc(notesRef, {
    text,
    imageUrl: img,
    createdAt: serverTimestamp()
  });

  alert("GÃ¶nderi paylaÅŸÄ±ldÄ±!");
  loadPosts();
};

/* ------------------------------
      GÃ–NDERÄ°LERÄ° Ã‡EK
------------------------------ */
async function loadPosts() {
  const snap = await getDocs(notesRef);
  const list = document.getElementById("postsList");
  list.innerHTML = "";

  snap.forEach(docSnap => {
    const d = docSnap.data();

    list.innerHTML += `
      <div class="post-item">
        <strong>${d.text}</strong>
        <br>

        <div class="post-actions">
          <button class="btn-edit" onclick="editPost('${docSnap.id}','${d.text}','${d.imageUrl}')">DÃ¼zenle</button>
          <button class="btn-delete" onclick="deletePost('${docSnap.id}')">Sil</button>
        </div>
      </div>
    `;
  });
}
loadPosts();

/* ------------------------------
      GÃ–NDERÄ° SÄ°L
------------------------------ */
window.deletePost = async function (id) {
  await deleteDoc(doc(db, "morpheraNotes", id));
  loadPosts();
};

/* ------------------------------
      GÃ–NDERÄ° DÃœZENLE
------------------------------ */
window.editPost = function (id, text, img) {
  document.getElementById("postText").value = text;
  document.getElementById("postImage").value = img || "";
  showPanel("newPostPanel");

  document.getElementById("addPost").onclick = async () => {
    await updateDoc(doc(db,"morpheraNotes",id), {
      text: document.getElementById("postText").value,
      imageUrl: document.getElementById("postImage").value
    });

    alert("GÃ¶nderi gÃ¼ncellendi!");
    loadPosts();
  };
};

</script>

</body>
</html>
