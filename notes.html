<!doctype html>
<html lang="tr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Morpheradan Notlar â€“ WeAreMorphera</title>
  <meta name="description" content="WeAreMorphera ekibinin dÃ¼ÅŸÃ¼nce duvarÄ±, notlarÄ± ve perde arkasÄ± paylaÅŸÄ±mlarÄ±.">
  <link rel="stylesheet" href="assets/css/styles.css?v=5" />
</head>
<body class="page-notes">

<!-- HEADER: index.html ile aynÄ±, sadece Morpheradan Notlar linki notes.html'e gider -->
<header class="header">
  <div class="container header__inner">

    <div class="header__row header__row--top">
      <a class="brand brand--pill" href="index.html#top" aria-label="WeAreMorphera anasayfa">
        <img
          src="assets/img/logo/morphera.png"
          alt="WeAreMorphera Logo"
          class="brand__logo"
          loading="lazy"
        />
        <span class="brand__text">WeAreMorphera</span>
      </a>

      <a href="index.html#socials" class="social-cta only-desktop" id="openSocial" aria-label="Sosyal Medya HesaplarÄ±mÄ±z">
        <span class="social-cta__label">Sosyal Medya HesaplarÄ±mÄ±z</span>
        <span class="social-cta__arrow" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path d="M5 12h12M13 6l6 6-6 6"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"/>
          </svg>
        </span>
      </a>

      <div class="header__cta only-desktop" id="socials" aria-label="Sosyal baÄŸlantÄ±lar">
        <a class="lottie-icon" id="iconTikTok" href="https://www.tiktok.com/@wearemorpheraagency" target="_blank" aria-label="TikTok"></a>
        <a class="lottie-icon" id="iconInstagram" href="http://instagram.com/wearemorphera" target="_blank" aria-label="Instagram"></a>
        <a class="lottie-icon" id="iconYouTube" href="https://www.youtube.com/@wemorphera" target="_blank" aria-label="YouTube"></a>
        <a class="lottie-icon" id="iconFacebook" href="http://facebook.com/WeAreMorpheraDijitalAjans" target="_blank" aria-label="Facebook"></a>
        <a class="lottie-icon" id="iconX" href="http://x.com/WeAreMorphera" target="_blank" aria-label="X"></a>
        <a class="lottie-icon" id="iconNsosyal" href="https://sosyal.teknofest.app/@wearemorpherasosyalmedyaajansi" target="_blank" aria-label="NSosyal"></a>
      </div>

      <button class="quote-btn" id="openQuote" type="button" aria-label="HÄ±zlÄ± Teklif Formu AÃ§">
        <img
          src="assets/img/logo/teklif.png"
          alt="Teklif Al"
          class="quote-btn__icon"
          loading="lazy"
        />
      </button>
    </div>

    <div class="header__row header__row--bottom">
      <nav class="nav" id="nav" aria-label="Ana menÃ¼">
        <a href="index.html#services">Hizmetler</a>
        <a href="index.html#resultsTable">BaÅŸarÄ± Tablomuz</a>
        <a href="team.html">Ekibimiz</a>
        <a href="index.html#process">SÃ¼reÃ§</a>
        <a href="index.html#plans">Paketler</a>
        <a href="index.html#work">PortfÃ¶y</a>
        <a href="index.html#blog">Blog</a>
        <a href="contact.html" class="btn btn--ghost" rel="noopener">Ä°letiÅŸim</a>
        <a href="notes.html" aria-current="page">Morpheradan Notlar</a>
      </nav>
    </div>

  </div>
</header>

<main class="section">
  <div class="container">

    <!-- HERO / BAÅžLIK BLOÄžU -->
    <section class="notes-hero">
      <div class="notes-hero__badge">AjansÄ±n DÃ¼ÅŸÃ¼nce DuvarÄ±</div>
      <h1 class="notes-hero__title">Morpheradan Notlar</h1>
      <p class="notes-hero__subtitle">
        WeAreMorphera Ã§ekirdek ekibinin; fikirlerini, yol hikÃ¢yesini ve perde arkasÄ± notlarÄ±nÄ±
        paylaÅŸtÄ±ÄŸÄ± kÃ¼Ã§Ã¼k bir iÃ§ duvar. ÃœÃ§ kiÅŸi yazÄ±yor, herkes okuyabiliyor.
      </p>
      <div class="notes-hero__meta">
        <span>ðŸ‘¥ Yazarlar: Bulut, BÃ¼ÅŸra, Emine</span>
        <span>ðŸ§± Format: Tweet benzeri kartlar</span>
        <span>ðŸŽ¨ Stil: WeAreMorphera gradient + cam efekt</span>
      </div>
    </section>

    <!-- LAYOUT: SOL DUVAR, SAÄž ADMIN PANELÄ° -->
    <section class="notes-layout">
      <!-- SOL: Herkese aÃ§Ä±k duvar -->
      <div class="notes-feed" id="notesFeed" aria-live="polite">
        <!-- JS ile doldurulacak -->
      </div>

      <!-- SAÄž: Admin KÃ¶ÅŸesi -->
      <aside class="notes-sidebar">
        <!-- LOGIN PANELÄ° -->
        <div class="notes-login" id="notesLogin">
          <h2 class="notes-login__title">Admin KÃ¶ÅŸesi</h2>
          <p class="notes-login__subtitle">
            <strong>UyarÄ±:</strong> Bu alan sadece site kurucularÄ± iÃ§indir.
            <br/>Bulut, BÃ¼ÅŸra ve Emine harici giriÅŸ yapÄ±lmamasÄ± rica olunur. ðŸ™‚
          </p>

          <form id="loginForm" class="notes-login__form" autocomplete="off">
            <label>
              KullanÄ±cÄ± AdÄ±
              <input name="username" placeholder="bulutkeles" required />
            </label>
            <label>
              Åžifre
              <input name="password" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required />
            </label>
            <button class="btn btn--primary" type="submit">Panele GiriÅŸ Yap</button>
            <p class="notes-login__error" id="loginError" aria-live="polite"></p>
          </form>
        </div>

        <!-- GÄ°RÄ°Åž SONRASI PANEL -->
        <div class="notes-admin hidden" id="notesAdmin">
          <div class="notes-admin__header">
            <div class="notes-admin__avatar-wrap">
              <div class="notes-admin__avatar" id="adminAvatar"></div>
            </div>
            <div>
              <p class="notes-admin__hello" id="adminHello"></p>
              <p class="notes-admin__role" id="adminRole"></p>
            </div>
          </div>

          <p class="notes-admin__hint">
            Buradan kÄ±sa notlar, mini tweetâ€™ler veya gÃ¶rsel eÅŸliÄŸinde aklÄ±na gelenleri
            duvara bÄ±rakabilirsin. YalnÄ±zca giriÅŸ yapan yazar; kendi notlarÄ±nÄ±
            dÃ¼zenleyip silebilir.
          </p>

          <!-- NOT FORMU -->
          <form id="noteForm" class="notes-noteform">
            <label>
              Not / DÃ¼ÅŸÃ¼nce *
              <textarea id="noteText" required
                placeholder="KÄ±sa, net, iÃ§ten bir not yaz..."></textarea>
            </label>
            <label>
              GÃ¶rsel Linki (opsiyonel)
              <input id="noteImageUrl" placeholder="https://... .webp / .jpg" />
            </label>
            <input type="hidden" id="editingId" value="" />
            <div class="notes-noteform__actions">
              <small>Not: Åžu an notlar tarayÄ±cÄ±da saklanÄ±r. Ortak sunucu tarafÄ± iÃ§in backend ekleyebiliriz.</small>
              <button class="btn btn--primary" type="submit">Kaydet</button>
            </div>
          </form>
        </div>
      </aside>
    </section>

  </div>
</main>

<!-- FOOTER -->
<footer class="footer">
  <div class="container footer__inner">
    <div class="footer__links">
      <a href="#">KVKK</a>
      <a href="#">Ã‡erez PolitikasÄ±</a>
      <a href="#">Hizmet KoÅŸullarÄ±</a>
      <span>Â© <span id="year"></span> WeAreMorphera</span>
    </div>
  </div>
</footer>

<!-- Ana JS (header, lottie vs) -->
<script src="assets/js/main.js" defer></script>

<!-- Morpheradan Notlar sayfasÄ±na Ã¶zel JS -->
<!-- Ana JS (header vs.) -->
<script src="assets/js/main.js" defer></script>

<!-- Morpheradan Notlar sayfasÄ±na Ã¶zel JS (FIRESTORE) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    getDocs,
    doc,
    updateDoc,
    deleteDoc,
    query,
    orderBy
  } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

  // === BURAYA KENDÄ° FIREBASE CONFIG'Ä°NÄ° YAPIÅžTIR ===
  const firebaseConfig = {
    apiKey: "SENÄ°N_API_KEY",
    authDomain: "SENIN_PROJE.firebaseapp.com",
    projectId: "SENIN_PROJE_ID",
    storageBucket: "SENIN_PROJE.appspot.com",
    messagingSenderId: "XXXXXXX",
    appId: "XXXXXXXX"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const notesColRef = collection(db, "morpheraNotes"); // koleksiyon adÄ±

  document.addEventListener("DOMContentLoaded", () => {
    // === Sabit kullanÄ±cÄ±lar ===
    const USERS = {
      "bulutkeles": {
        password: "Blt.1995",
        name: "Bulut KeleÅŸ",
        role: "Co-Founder Â· Tech & Growth",
        color: "var(--accent1)"
      },
      "busrakaraca": {
        password: "BÃ¼sra.95",
        name: "BÃ¼ÅŸra Karaca",
        role: "Co-Founder Â· Creative & Ops",
        color: "var(--accent2)"
      },
      "eminekaraca": {
        password: "Emine.95",
        name: "Emine Karaca",
        role: "Community & Content",
        color: "linear-gradient(135deg,#22c55e,#0ea5e9)"
      }
    };

    let currentUser = null;

    const notesFeed   = document.getElementById("notesFeed");
    const loginForm   = document.getElementById("loginForm");
    const loginError  = document.getElementById("loginError");
    const notesLogin  = document.getElementById("notesLogin");
    const notesAdmin  = document.getElementById("notesAdmin");
    const adminAvatar = document.getElementById("adminAvatar");
    const adminHello  = document.getElementById("adminHello");
    const adminRole   = document.getElementById("adminRole");
    const noteForm    = document.getElementById("noteForm");
    const noteText    = document.getElementById("noteText");
    const noteImageUrl = document.getElementById("noteImageUrl");
    const editingIdEl = document.getElementById("editingId");

    function escapeHtml(str) {
      return String(str)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;");
    }

    // === Firestore'dan notlarÄ± Ã§ek ===
    async function loadNotes() {
      const q = query(notesColRef, orderBy("createdAt", "desc"));
      const snap = await getDocs(q);
      return snap.docs.map(d => ({
        id: d.id,
        ...d.data()
      }));
    }

    // === NotlarÄ± duvara Ã§iz ===
    async function renderNotes() {
      const notes = await loadNotes();

      if (!notes.length) {
        notesFeed.innerHTML = `
          <div class="note-card note-card--empty">
            <p>HenÃ¼z bir not bÄ±rakÄ±lmamÄ±ÅŸ. Ä°lk notu ekipten biri yazdÄ±ÄŸÄ±nda burada gÃ¶rÃ¼necek.</p>
          </div>
        `;
        return;
      }

      notesFeed.innerHTML = notes.map(note => {
        const isMine = currentUser && note.authorKey === currentUser.username;
        const date = new Date(note.createdAt || Date.now());
        const ts = date.toLocaleString("tr-TR", {
          day: "2-digit", month: "2-digit", year: "numeric",
          hour: "2-digit", minute: "2-digit"
        });

        return `
          <article class="note-card" data-id="${note.id}">
            <header class="note-card__header">
              <div class="note-card__avatar" style="background:${note.avatarBg}">
                <span>${note.authorInitials}</span>
              </div>
              <div class="note-card__meta">
                <div class="note-card__author">${note.authorName}</div>
                <div class="note-card__role">${note.authorRole}</div>
                <time class="note-card__time">${ts}</time>
              </div>
              ${isMine ? `
              <div class="note-card__actions">
                <button type="button" class="note-btn note-btn--ghost note-edit">DÃ¼zenle</button>
                <button type="button" class="note-btn note-btn--danger note-delete">Sil</button>
              </div>` : ""}
            </header>
            <div class="note-card__body">
              <p>${escapeHtml(note.text || "").replace(/\\n/g,"<br>")}</p>
              ${note.imageUrl ? `
                <figure class="note-card__figure">
                  <img src="${note.imageUrl}" alt="" loading="lazy" />
                </figure>
              ` : ""}
            </div>
          </article>
        `;
      }).join("");
    }

    // === LOGIN ===
    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const formData = new FormData(loginForm);
      const username = String(formData.get("username") || "").trim();
      const password = String(formData.get("password") || "");

      const user = USERS[username];
      if (!user || user.password !== password) {
        loginError.textContent = "KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±.";
        return;
      }

      loginError.textContent = "";
      currentUser = { username, ...user };

      notesLogin.classList.add("hidden");
      notesAdmin.classList.remove("hidden");

      adminAvatar.style.background = user.color;
      adminAvatar.textContent = user.name.charAt(0).toUpperCase();
      adminHello.textContent = `Merhaba ${user.name}, Morpheradan Notlar paneline hoÅŸ geldin.`;
      adminRole.textContent  = user.role;

      renderNotes();
    });

    // === NOT EKLE / GÃœNCELLE ===
    noteForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      if (!currentUser) return;

      const text = noteText.value.trim();
      const img  = noteImageUrl.value.trim();
      if (!text) return;

      const editingId = editingIdEl.value;

      if (editingId) {
        const ref = doc(db, "morpheraNotes", editingId);
        await updateDoc(ref, {
          text,
          imageUrl: img || "",
          updatedAt: Date.now()
        });
        editingIdEl.value = "";
      } else {
        const initials = currentUser.name
          .split(" ")
          .map(p => p.charAt(0))
          .join("")
          .slice(0,2)
          .toUpperCase();

        await addDoc(notesColRef, {
          authorKey: currentUser.username,
          authorName: currentUser.name,
          authorRole: currentUser.role,
          authorInitials: initials,
          avatarBg: currentUser.color,
          text,
          imageUrl: img || "",
          createdAt: Date.now()
        });
      }

      noteText.value = "";
      noteImageUrl.value = "";
      await renderNotes();
    });

    // === DÃœZENLE / SÄ°L (sadece kendi notlarÄ±nda) ===
    notesFeed.addEventListener("click", async (e) => {
      const target = e.target;
      if (!target.classList) return;

      const card = target.closest(".note-card");
      if (!card) return;

      const id = card.getAttribute("data-id");
      if (!id) return;

      const notes = await loadNotes();
      const note = notes.find(n => n.id === id);
      if (!note) return;
      if (!currentUser || note.authorKey !== currentUser.username) return;

      if (target.classList.contains("note-delete")) {
        if (confirm("Bu notu silmek istediÄŸine emin misin?")) {
          const ref = doc(db, "morpheraNotes", id);
          await deleteDoc(ref);
          await renderNotes();
        }
      }

      if (target.classList.contains("note-edit")) {
        noteText.value = note.text || "";
        noteImageUrl.value = note.imageUrl || "";
        editingIdEl.value = note.id;
        noteText.focus();
      }
    });

    // Sayfa aÃ§Ä±lÄ±nca herkese notlarÄ± gÃ¶ster (kimse login olmasa bile)
    renderNotes();
  });
</script>
<script type="module">
  /* === FIREBASE === */
  import { 
    initializeApp 
  } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";

  import { 
    getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, serverTimestamp 
  } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCoLU3FES5QdNoD1WOHz9M7Z01U63hkn4U",
    authDomain: "morpheranotes.firebaseapp.com",
    projectId: "morpheranotes",
    storageBucket: "morpheranotes.firebasestorage.app",
    messagingSenderId: "756772520204",
    appId: "1:756772520204:web:b686f9f69f860098a10929",
    measurementId: "G-CLH7TE7TNP"
  };

  const app = initializeApp(firebaseConfig);
  const db  = getFirestore(app);

  /* === SABÄ°T ADMÄ°N HESAPLARI === */
  const ADMIN_USERS = {
    "bulutkeles":  { pass: "Blt.1995",   ad: "Bulut KeleÅŸ",  role: "Co-Founder Â· Tech & Growth", avatar: "B" },
    "busrakaraca": { pass: "BÃ¼sra.95",  ad: "BÃ¼ÅŸra Karaca", role: "Co-Founder Â· Creative Lead", avatar: "B" },
    "eminekaraca": { pass: "Emine.95",  ad: "Emine Karaca", role: "Social Media Specialist",     avatar: "E" }
  };

  let currentUser = null;

  /* === ELEMENTLER === */
  const loginBox   = document.getElementById("notesLogin");
  const adminBox   = document.getElementById("notesAdmin");
  const feedBox    = document.getElementById("notesFeed");

  const loginUser  = document.getElementById("loginUser");
  const loginPass  = document.getElementById("loginPass");
  const loginErr   = document.getElementById("loginError");
  const loginBtn   = document.getElementById("loginBtn");

  const noteText   = document.getElementById("noteText");
  const noteImage  = document.getElementById("noteImage");
  const saveBtn    = document.getElementById("saveNote");

  /* === GÄ°RÄ°Åž === */
  loginBtn.addEventListener("click", () => {
    const u = loginUser.value.trim();
    const p = loginPass.value.trim();

    if (!ADMIN_USERS[u] || ADMIN_USERS[u].pass !== p) {
      loginErr.textContent = "HatalÄ± kullanÄ±cÄ± adÄ± veya ÅŸifre.";
      loginErr.style.display = "block";
      return;
    }

    currentUser = ADMIN_USERS[u];
    loginBox.classList.add("hidden");
    adminBox.classList.remove("hidden");

    document.getElementById("adminName").textContent = currentUser.ad;
    document.getElementById("adminRole").textContent = currentUser.role;
    document.getElementById("adminAvatar").textContent = currentUser.avatar;
  });

  /* === NOT EKLE === */
  saveBtn.addEventListener("click", async () => {
    const text = noteText.value.trim();
    const img  = noteImage.value.trim();

    if (!currentUser) return;
    if (!text) return alert("Not metni boÅŸ olamaz.");

    await addDoc(collection(db, "notes"), {
      user: currentUser.ad,
      avatar: currentUser.avatar,
      role: currentUser.role,
      text,
      img: img || null,
      timestamp: serverTimestamp()
    });

    noteText.value = "";
    noteImage.value = "";
    loadNotes();
  });

  /* === NOTLARI YÃœKLE === */
  async function loadNotes() {
    feedBox.innerHTML = "<p style='color:#aaa'>YÃ¼kleniyor...</p>";

    const q = await getDocs(collection(db, "notes"));
    let html = "";

    q.forEach(snap => {
      const d = snap.data();
      const id = snap.id;

      html += `
      <article class="note-card">
        <div class="note-card__header">
          <div class="note-card__avatar">${d.avatar}</div>
          <div class="note-card__meta">
            <div class="note-card__author">${d.user}</div>
            <div class="note-card__role">${d.role}</div>
          </div>
          ${
            currentUser && currentUser.ad === d.user
              ? `<div class="note-card__actions">
                   <button class="note-btn" onclick="editNote('${id}','${d.text}','${d.img}')">DÃ¼zenle</button>
                   <button class="note-btn note-btn--danger" onclick="deleteNote('${id}')">Sil</button>
                 </div>`
              : ""
          }
        </div>
        <div class="note-card__body">
          <p>${d.text}</p>
          ${
            d.img
              ? `<figure class="note-card__figure"><img src="${d.img}" /></figure>`
              : ""
          }
        </div>
      </article>`;
    });

    feedBox.innerHTML = html || "<p class='note-card note-card--empty'>HenÃ¼z not yok.</p>";
  }

  window.deleteNote = async (id) => {
    await deleteDoc(doc(db, "notes", id));
    loadNotes();
  };

  window.editNote = (id, text, img) => {
    noteText.value = text;
    noteImage.value = img || "";
    saveBtn.onclick = async () => {
      await updateDoc(doc(db, "notes", id), {
        text: noteText.value.trim(),
        img: noteImage.value.trim(),
      });
      saveBtn.onclick = saveNoteDefault;
      noteText.value = "";
      noteImage.value = "";
      loadNotes();
    };
  };

  const saveNoteDefault = saveBtn.onclick;

  // Ä°lk yÃ¼kleme
  loadNotes();
</script>


</body>
</html>
